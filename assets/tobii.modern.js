function e(){return(e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function t(r){const i=['a[href]:not([tabindex^="-"]):not([inert])','area[href]:not([tabindex^="-"]):not([inert])',"input:not([disabled]):not([inert])","select:not([disabled]):not([inert])","textarea:not([disabled]):not([inert])","button:not([disabled]):not([inert])",'iframe:not([tabindex^="-"]):not([inert])','audio:not([tabindex^="-"]):not([inert])','video:not([tabindex^="-"]):not([inert])','[contenteditable]:not([tabindex^="-"]):not([inert])','[tabindex]:not([tabindex^="-"]):not([inert])'],n=[],a={gallery:[],slider:null,sliderElements:[],elementsLength:0,currentIndex:0,x:0},o=[];let s={},d=0,l=null,u=null,c=null,p=null,b=null,m={},h=!1,g=!1,f=!1,v=null,y=null,w=null,x=!1,A=!1,E=0,L={},_=null,I=null;const C={image:{checkSupport:e=>!e.hasAttribute("data-type")&&e.href.match(/\.(png|jpe?g|tiff|tif|gif|bmp|webp|avif|svg|ico)(\?.*)?$/i),init(e,t){const r=document.createElement("figure"),i=document.createElement("figcaption"),n=document.createElement("img"),a=e.querySelector("img"),o=document.createElement("div");r.style.opacity="0",a&&(n.alt=a.alt||""),n.setAttribute("src",""),n.setAttribute("data-src",e.href),r.appendChild(n),s.captions&&("function"==typeof s.captionText?i.textContent=s.captionText(e):"self"===s.captionsSelector&&e.getAttribute(s.captionAttribute)?i.textContent=e.getAttribute(s.captionAttribute):"img"===s.captionsSelector&&a&&a.getAttribute(s.captionAttribute)&&(i.textContent=a.getAttribute(s.captionAttribute)),i.textContent&&(i.id=`tobii-figcaption-${d}`,r.appendChild(i),n.setAttribute("aria-labelledby",i.id),++d)),t.appendChild(r),o.className="tobii__loader",o.setAttribute("role","progressbar"),o.setAttribute("aria-label",s.loadingIndicatorLabel),t.appendChild(o),t.setAttribute("data-type","image")},onPreload(e){C.image.onLoad(e)},onLoad(e){const t=e.querySelector("img");if(!t.hasAttribute("data-src"))return;const r=e.querySelector("figure"),i=e.querySelector(".tobii__loader");t.onload=()=>{e.removeChild(i),r.style.opacity="1"},t.setAttribute("src",t.getAttribute("data-src")),t.removeAttribute("data-src")},onLeave(e){},onCleanup(e){}},html:{checkSupport:e=>ae(e,"html"),init(e,t){const r=e.hasAttribute("href")?e.getAttribute("href"):e.getAttribute("data-target"),i=document.querySelector(r);if(!i)throw new Error(`Ups, I can't find the target ${r}.`);t.appendChild(i),t.setAttribute("data-type","html")},onPreload(e){},onLoad(e){const t=e.querySelector("video");t&&(t.hasAttribute("data-time")&&t.readyState>0&&(t.currentTime=t.getAttribute("data-time")),s.autoplayVideo&&t.play())},onLeave(e){const t=e.querySelector("video");t&&(t.paused||t.pause(),t.readyState>0&&t.setAttribute("data-time",t.currentTime))},onCleanup(e){const t=e.querySelector("video");if(t&&t.readyState>0&&t.readyState<3&&t.duration!==t.currentTime){const r=t.cloneNode(!0);oe(t),t.load(),t.parentNode.removeChild(t),e.appendChild(r)}}},iframe:{checkSupport:e=>ae(e,"iframe"),init(e,t){const r=document.createElement("iframe"),i=e.hasAttribute("href")?e.getAttribute("href"):e.getAttribute("data-target");r.setAttribute("frameborder","0"),r.setAttribute("src",""),r.setAttribute("data-src",i),e.getAttribute("data-width")&&(r.style.maxWidth=`${e.getAttribute("data-width")}px`),e.getAttribute("data-height")&&(r.style.maxHeight=`${e.getAttribute("data-height")}px`),t.appendChild(r),t.setAttribute("data-type","iframe")},onPreload(e){},onLoad(e){const t=e.querySelector("iframe");t.setAttribute("src",t.getAttribute("data-src"))},onLeave(e){},onCleanup(e){}},youtube:{checkSupport:e=>ae(e,"youtube"),init(e,t){const r=document.createElement("div");t.appendChild(r),o[E]=new window.YT.Player(r,{host:"https://www.youtube-nocookie.com",height:e.getAttribute("data-height")||"360",width:e.getAttribute("data-width")||"640",videoId:e.getAttribute("data-id"),playerVars:{controls:e.getAttribute("data-controls")||1,rel:0,playsinline:1}}),t.setAttribute("data-player",E),t.setAttribute("data-type","youtube"),E++},onPreload(e){},onLoad(e){s.autoplayVideo&&o[e.getAttribute("data-player")].playVideo()},onLeave(e){1===o[e.getAttribute("data-player")].getPlayerState()&&o[e.getAttribute("data-player")].pauseVideo()},onCleanup(e){1===o[e.getAttribute("data-player")].getPlayerState()&&o[e.getAttribute("data-player")].pauseVideo()}}},S=e=>{if(null===document.querySelector('[data-type="youtube"]')||A)k(e);else{if(null===document.getElementById("iframe_api")){const e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.id="iframe_api",e.src="https://www.youtube.com/iframe_api",t.parentNode.insertBefore(e,t)}-1===n.indexOf(e)&&n.push(e),window.onYouTubePlayerAPIReady=()=>{n.forEach(e=>{k(e)}),A=!0}}},T=e=>e.hasAttribute("data-group")?e.getAttribute("data-group"):"default",k=e=>{if(_=T(e),Object.prototype.hasOwnProperty.call(L,_)||(L[_]=JSON.parse(JSON.stringify(a)),N()),-1!==L[_].gallery.indexOf(e))throw new Error("Ups, element already added.");if(L[_].gallery.push(e),L[_].elementsLength++,s.zoom&&e.querySelector("img")){const t=document.createElement("div");t.className="tobii-zoom__icon",t.innerHTML=s.zoomText,e.classList.add("tobii-zoom"),e.appendChild(t)}e.addEventListener("click",R),O(e),ue()&&_===I&&(se(),de())},P=e=>{const t=T(e);if(-1===L[t].gallery.indexOf(e))throw new Error(`Ups, I can't find a slide for the element ${e}.`);{const r=L[t].gallery.indexOf(e),i=L[t].sliderElements[r];if(ue()&&t===I&&r===L[t].currentIndex){if(1===L[t].elementsLength)throw X(),new Error("Ups, I've closed. There are no slides more to show.");0===L[t].currentIndex?z():$()}if(L[t].elementsLength--,s.zoom&&e.querySelector(".tobii-zoom__icon")){const t=e.querySelector(".tobii-zoom__icon");t.parentNode.classList.remove("tobii-zoom"),t.parentNode.removeChild(t)}e.removeEventListener("click",R),i.parentNode.removeChild(i)}},N=()=>{L[_].slider=document.createElement("div"),L[_].slider.className="tobii__slider",L[_].slider.setAttribute("aria-hidden","true"),l.appendChild(L[_].slider)},O=e=>{for(const t in C)if(Object.prototype.hasOwnProperty.call(C,t)&&C[t].checkSupport(e)){const r=document.createElement("div"),i=document.createElement("div");r.className="tobii__slide",r.style.position="absolute",r.style.left=100*L[_].x+"%",r.setAttribute("aria-hidden","true"),C[t].init(e,i),r.appendChild(i),L[_].slider.appendChild(r),L[_].sliderElements.push(r),++L[_].x;break}},q=e=>{if(I=null!==I?I:_,ue())throw new Error("Ups, I'm aleady open.");if(!ue()&&(e||(e=0),-1===e||e>=L[I].elementsLength))throw new Error(`Ups, I can't find slide ${e}.`);s.hideScrollbar&&(document.documentElement.classList.add("tobii-is-open"),document.body.classList.add("tobii-is-open")),se(),s.close||(p.disabled=!1,p.setAttribute("aria-hidden","true")),v=document.activeElement;const t=window.location.href;window.history.pushState({tobii:"close"},"Image",t),L[I].currentIndex=e,j(),ie(),Y(L[I].currentIndex),L[I].slider.setAttribute("aria-hidden","false"),l.setAttribute("aria-hidden","false"),de(),U(L[I].currentIndex+1),U(L[I].currentIndex-1),setTimeout(()=>{L[I].slider.classList.add("tobii__slider--animate")},1e3);const r=new window.CustomEvent("open");l.dispatchEvent(r)},X=()=>{if(!ue())throw new Error("Ups, I'm already closed.");s.hideScrollbar&&(document.documentElement.classList.remove("tobii-is-open"),document.body.classList.remove("tobii-is-open")),ne(),null!==window.history.state&&"close"===window.history.state.tobii&&window.history.back(),v.focus(),M(L[I].currentIndex),D(L[I].currentIndex),l.setAttribute("aria-hidden","true"),L[I].slider.setAttribute("aria-hidden","true"),L[I].currentIndex=0,L[I].slider.classList.remove("tobii__slider--animate")},U=e=>{if(void 0===L[I].sliderElements[e])return;const t=L[I].sliderElements[e].querySelector("[data-type]"),r=t.getAttribute("data-type");C[r].onPreload(t)},Y=e=>{if(void 0===L[I].sliderElements[e])return;const t=L[I].sliderElements[e].querySelector("[data-type]"),r=t.getAttribute("data-type");L[I].sliderElements[e].classList.add("tobii__slide--is-active"),L[I].sliderElements[e].setAttribute("aria-hidden","false"),C[r].onLoad(t)},$=()=>{if(!ue())throw new Error("Ups, I'm closed.");L[I].currentIndex>0&&(M(L[I].currentIndex),Y(--L[I].currentIndex),de("left"),D(L[I].currentIndex+1),U(L[I].currentIndex-1));const e=new window.CustomEvent("previous");l.dispatchEvent(e)},z=()=>{if(!ue())throw new Error("Ups, I'm closed.");L[I].currentIndex<L[I].elementsLength-1&&(M(L[I].currentIndex),Y(++L[I].currentIndex),de("right"),D(L[I].currentIndex-1),U(L[I].currentIndex+1));const e=new window.CustomEvent("next");l.dispatchEvent(e)},M=e=>{if(void 0===L[I].sliderElements[e])return;const t=L[I].sliderElements[e].querySelector("[data-type]"),r=t.getAttribute("data-type");L[I].sliderElements[e].classList.remove("tobii__slide--is-active"),L[I].sliderElements[e].setAttribute("aria-hidden","true"),C[r].onLeave(t)},D=e=>{if(void 0===L[I].sliderElements[e])return;const t=L[I].sliderElements[e].querySelector("[data-type]"),r=t.getAttribute("data-type");C[r].onCleanup(t)},H=()=>{I=null!==I?I:_,y=-L[I].currentIndex*l.offsetWidth,L[I].slider.style.transform=`translate3d(${y}px, 0, 0)`,w=y},j=()=>{m={startX:0,endX:0,startY:0,endY:0}},B=()=>{const e=m.endX-m.startX,t=m.endY-m.startY,r=Math.abs(e),i=Math.abs(t);e>0&&r>s.threshold&&L[I].currentIndex>0?$():e<0&&r>s.threshold&&L[I].currentIndex!==L[I].elementsLength-1?z():t<0&&i>s.threshold&&s.swipeClose?X():H()},V=()=>{x||(x=!0,window.requestAnimationFrame(()=>{H(),x=!1}))},R=e=>{e.preventDefault(),I=T(e.currentTarget),q(L[I].gallery.indexOf(e.currentTarget))},W=e=>{e.target===u?$():e.target===c?z():(e.target===p||!1===h&&!1===g&&e.target.classList.contains("tobii__slide")&&s.docClose)&&X(),e.stopPropagation()},G=e=>{const t=Array.prototype.slice.call(l.querySelectorAll(`.tobii__btn:not([disabled]), .tobii__slide--is-active + ${i.join(", .tobii__slide--is-active ")}`)).filter(e=>!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),r=t.indexOf(document.activeElement);9===e.keyCode||"Tab"===e.code?e.shiftKey&&0===r?(t[t.length-1].focus(),e.preventDefault()):e.shiftKey||r!==t.length-1||(t[0].focus(),e.preventDefault()):27===e.keyCode||"Escape"===e.code?(e.preventDefault(),X()):37===e.keyCode||"ArrowLeft"===e.code?(e.preventDefault(),$()):39!==e.keyCode&&"ArrowRight"!==e.code||(e.preventDefault(),z())},J=e=>{pe(e.target)||(e.stopPropagation(),h=!1,g=!1,f=!0,m.startX=e.touches[0].pageX,m.startY=e.touches[0].pageY,L[I].slider.classList.add("tobii__slider--is-dragging"))},K=e=>{e.stopPropagation(),f&&(e.preventDefault(),m.endX=e.touches[0].pageX,m.endY=e.touches[0].pageY,re())},F=e=>{e.stopPropagation(),f=!1,L[I].slider.classList.remove("tobii__slider--is-dragging"),m.endX&&B(),j()},Q=e=>{pe(e.target)||(e.preventDefault(),e.stopPropagation(),h=!1,g=!1,f=!0,m.startX=e.pageX,m.startY=e.pageY,L[I].slider.classList.add("tobii__slider--is-dragging"))},Z=e=>{e.preventDefault(),f&&(m.endX=e.pageX,m.endY=e.pageY,re())},ee=e=>{e.stopPropagation(),f=!1,L[I].slider.classList.remove("tobii__slider--is-dragging"),m.endX&&B(),j()},te=()=>{f=!1},re=()=>{Math.abs(m.startX-m.endX)>0&&!g&&L[I].elementsLength>1?(L[I].slider.style.transform=`translate3d(${w-Math.round(m.startX-m.endX)}px, 0, 0)`,h=!0,g=!1):Math.abs(m.startY-m.endY)>0&&!h&&s.swipeClose&&(L[I].slider.style.transform=`translate3d(${w}px, -${Math.round(m.startY-m.endY)}px, 0)`,h=!1,g=!0)},ie=()=>{s.keyboard&&window.addEventListener("keydown",G),window.addEventListener("resize",V),window.addEventListener("popstate",X),l.addEventListener("click",W),s.draggable&&(ce()&&(l.addEventListener("touchstart",J),l.addEventListener("touchmove",K),l.addEventListener("touchend",F)),l.addEventListener("mousedown",Q),l.addEventListener("mouseup",ee),l.addEventListener("mousemove",Z),l.addEventListener("contextmenu",te))},ne=()=>{s.keyboard&&window.removeEventListener("keydown",G),window.removeEventListener("resize",V),window.removeEventListener("popstate",X),l.removeEventListener("click",W),s.draggable&&(ce()&&(l.removeEventListener("touchstart",J),l.removeEventListener("touchmove",K),l.removeEventListener("touchend",F)),l.removeEventListener("mousedown",Q),l.removeEventListener("mouseup",ee),l.removeEventListener("mousemove",Z),l.removeEventListener("contextmenu",te))},ae=(e,t)=>e.getAttribute("data-type")===t,oe=e=>{const t=e.querySelectorAll("src");t&&t.forEach(e=>{e.setAttribute("src","")})},se=()=>{(s.draggable&&s.swipeClose&&!L[I].slider.classList.contains("tobii__slider--is-draggable")||s.draggable&&L[I].elementsLength>1&&!L[I].slider.classList.contains("tobii__slider--is-draggable"))&&L[I].slider.classList.add("tobii__slider--is-draggable"),!s.nav||1===L[I].elementsLength||"auto"===s.nav&&ce()?(u.setAttribute("aria-hidden","true"),u.disabled=!0,c.setAttribute("aria-hidden","true"),c.disabled=!0):(u.setAttribute("aria-hidden","false"),u.disabled=!1,c.setAttribute("aria-hidden","false"),c.disabled=!1),b.setAttribute("aria-hidden",s.counter&&1!==L[I].elementsLength?"false":"true")},de=e=>{H(),b.textContent=`${L[I].currentIndex+1}/${L[I].elementsLength}`,(e=>{(!0===s.nav||"auto"===s.nav)&&!ce()&&L[I].elementsLength>1?(u.setAttribute("aria-hidden","true"),u.disabled=!0,c.setAttribute("aria-hidden","true"),c.disabled=!0,1===L[I].elementsLength?s.close&&p.focus():0===L[I].currentIndex?(c.setAttribute("aria-hidden","false"),c.disabled=!1,c.focus()):L[I].currentIndex===L[I].elementsLength-1?(u.setAttribute("aria-hidden","false"),u.disabled=!1,u.focus()):(u.setAttribute("aria-hidden","false"),u.disabled=!1,c.setAttribute("aria-hidden","false"),c.disabled=!1,"left"===e?u.focus():c.focus())):s.close&&p.focus()})(e)},le=()=>{ue()&&X(),Object.entries(L).forEach(e=>{e[1].gallery.forEach(e=>{P(e)})}),L={},_=I=null,d=0},ue=()=>"false"===l.getAttribute("aria-hidden"),ce=()=>"ontouchstart"in window,pe=e=>-1!==["TEXTAREA","OPTION","INPUT","SELECT"].indexOf(e.nodeName)||e===u||e===c||e===p;return(t=>{s=(t=>e({},{selector:".lightbox",captions:!0,captionsSelector:"img",captionAttribute:"alt",captionText:null,nav:"auto",navText:['<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18" /></svg>','<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="9 6 15 12 9 18" /></svg>'],navLabel:["Previous image","Next image"],close:!0,closeText:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path stroke="none" d="M0 0h24v24H0z"/><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></svg>',closeLabel:"Close lightbox",loadingIndicatorLabel:"Image loading",counter:!0,download:!1,downloadText:"",downloadLabel:"Download image",keyboard:!0,zoom:!0,zoomText:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="16 4 20 4 20 8" /><line x1="14" y1="10" x2="20" y2="4" /><polyline points="8 20 4 20 4 16" /><line x1="4" y1="20" x2="10" y2="14" /><polyline points="16 20 20 20 20 16" /><line x1="14" y1="14" x2="20" y2="20" /><polyline points="8 4 4 4 4 8" /><line x1="4" y1="4" x2="10" y2="10" /></svg>',docClose:!0,swipeClose:!0,hideScrollbar:!0,draggable:!0,threshold:100,rtl:!1,loop:!1,autoplayVideo:!1,modal:!1,theme:"tobii--theme-default"},t))(t),l||(l=document.createElement("div"),l.setAttribute("role","dialog"),l.setAttribute("aria-hidden","true"),l.classList.add("tobii"),l.classList.add(s.theme),u=document.createElement("button"),u.className="tobii__btn tobii__btn--previous",u.setAttribute("type","button"),u.setAttribute("aria-label",s.navLabel[0]),u.innerHTML=s.navText[0],l.appendChild(u),c=document.createElement("button"),c.className="tobii__btn tobii__btn--next",c.setAttribute("type","button"),c.setAttribute("aria-label",s.navLabel[1]),c.innerHTML=s.navText[1],l.appendChild(c),p=document.createElement("button"),p.className="tobii__btn tobii__btn--close",p.setAttribute("type","button"),p.setAttribute("aria-label",s.closeLabel),p.innerHTML=s.closeText,l.appendChild(p),b=document.createElement("div"),b.className="tobii__counter",l.appendChild(b),document.body.appendChild(l));const r=document.querySelectorAll(s.selector);if(!r)throw new Error(`Ups, I can't find the selector ${s.selector} on this website.`);r.forEach(e=>{S(e)})})(r),t.open=q,t.previous=$,t.next=z,t.close=X,t.add=S,t.remove=P,t.reset=le,t.destroy=()=>{le(),l.parentNode.removeChild(l)},t.isOpen=ue,t.slidesIndex=()=>L[I].currentIndex,t.select=e=>{const t=L[I].currentIndex;if(!ue())throw new Error("Ups, I'm closed.");if(ue()){if(!e&&0!==e)throw new Error("Ups, no slide specified.");if(e===L[I].currentIndex)throw new Error(`Ups, slide ${e} is already selected.`);if(-1===e||e>=L[I].elementsLength)throw new Error(`Ups, I can't find slide ${e}.`)}L[I].currentIndex=e,M(t),Y(e),e<t&&(de("left"),D(t),U(e-1)),e>t&&(de("right"),D(t),U(e+1))},t.slidesCount=()=>L[I].elementsLength,t.selectGroup=e=>{if(ue())throw new Error("Ups, I'm open.");if(!e)throw new Error("Ups, no group specified.");if(e&&!Object.prototype.hasOwnProperty.call(L,e))throw new Error(`Ups, I don't have a group called "${e}".`);I=e},t.currentGroup=()=>null!==I?I:_,t.on=(e,t)=>{l.addEventListener(e,t)},t.off=(e,t)=>{l.removeEventListener(e,t)},t}export default t;
